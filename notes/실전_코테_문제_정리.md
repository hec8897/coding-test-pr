# μ‹¤μ „ μ½”ν… λ¬Έμ  μ •λ¦¬

> μ‹¤μ  μ½”λ”©ν…μ¤νΈμ—μ„ μ¶μ λ λ¬Έμ λ“¤μ„ μ •λ¦¬ν• λ¬Έμ„μ…λ‹λ‹¤.

## π“ λ©”νƒ€ μ •λ³΄

- **μ΄ λ¬Έμ  μ**: 3κ°
- **κ³µν†µ ν¨ν„΄**: μ¬λΌμ΄λ”© μλ„μ°, λ¨λ…Έν† λ‹‰ ν/λ±
- **λ‚μ΄λ„**: μ¤‘μƒκΈ‰
- **ν•µμ‹¬ κ°λ…**: λ„μ ν•©, DP, λΉλ„ κ΄€λ¦¬, μµμ ν™” κΈ°λ²•

---

## 1. κΈΈμ΄ β‰¤ k μµλ€ λ¶€λ¶„ν•©

### λ¬Έμ  μ„¤λ…
- **λ¬Έμ **: μ •μ λ°°μ—΄ `pnl`μ—μ„ κΈΈμ΄κ°€ `k` μ΄ν•μΈ μ—°μ† λ¶€λ¶„λ°°μ—΄ μ¤‘ μµλ€ ν•©μ„ κµ¬ν•λ‹¤.
- **ν•µμ‹¬ κ°λ…**: λ„μ  ν•©, λ¨λ…Έν† λ‹‰ λ±(μ¬λΌμ΄λ”© μλ„μ°), μΉ΄λ°μΈ λ³€ν•
- **μ‹κ°„/κ³µκ°„ λ³µμ΅λ„**: `O(n)` / `O(n)`

### ν’€μ΄ ν•µμ‹¬
1. **λ„μ  ν•© λ°°μ—΄** μƒμ„±μΌλ΅ κµ¬κ°„ ν•©μ„ `O(1)`μ— κ³„μ‚°
2. **λ¨λ…Έν† λ‹‰ λ±**μΌλ΅ μλ„μ° λ‚΄ μµμ† λ„μ ν•© μ μ§€
3. κ° μ„μΉμ—μ„ `ps[j] - ps[μµμ†μΈλ±μ¤]`κ°€ μµλ€ λ¶€λ¶„ν•©

### μ½”λ“

```javascript
function maxSubarraySumAtMostK(arr, k, allowEmpty = false) {
  const n = arr.length;
  const ps = new Array(n + 1).fill(0);
  for (let i = 1; i <= n; i++) ps[i] = ps[i - 1] + arr[i - 1];

  const dq = [];
  dq.push(0);

  let ans = allowEmpty ? 0 : -Infinity;

  for (let j = 1; j <= n; j++) {
    // μλ„μ° ν¬κΈ° k μ μ§€
    while (dq.length && dq[0] < j - k) dq.shift();
    
    // ν„μ¬κΉμ§€ μµλ€ λ¶€λ¶„ν•© κ³„μ‚°
    if (dq.length) ans = Math.max(ans, ps[j] - ps[dq[0]]);
    
    // λ¨λ…Έν† λ‹‰ λ± μ μ§€ (μµμ† λ„μ ν•©λ§ μ μ§€)
    while (dq.length && ps[j] <= ps[dq[dq.length - 1]]) dq.pop();
    dq.push(j);
  }
  return ans;
}
```

### μ£Όμ” ν¬μΈνΈ
- λ±μ μ•μ½μ€ ν•­μƒ μλ„μ° λ‚΄ μµμ† λ„μ ν•© μΈλ±μ¤
- `ps[j] - ps[dq[0]]`λ” `dq[0]+1`λ¶€ν„° `j`κΉμ§€μ κµ¬κ°„ ν•©

---

## 2. μµλ€ k μ ν”„λ΅ λ„λ‹¬ν•λ” μµμ† λΉ„μ©

### λ¬Έμ  μ„¤λ…
- **λ¬Έμ **: λΉ„μ© λ°°μ—΄ `cost`μ™€ μµλ€ μ ν”„ κΈΈμ΄ `k`κ°€ μ£Όμ–΄μ§ λ•, μ‹μ‘μ μ—μ„ μ§€μ  `n-1`κΉμ§€ μµμ† λΉ„μ©μΌλ΅ λ„λ‹¬ν•λ‹¤.
- **ν•µμ‹¬ κ°λ…**: DP, μ¬λΌμ΄λ”© μλ„μ° μµμ†κ°’, λ¨λ…Έν† λ‹‰ ν
- **μ‹κ°„/κ³µκ°„ λ³µμ΅λ„**: `O(n)` / `O(k)`

### ν’€μ΄ ν•µμ‹¬
1. **DP μ •μ**: `dp[i]` = μ§€μ  `i`κΉμ§€ λ„λ‹¬ν•λ” μµμ† λΉ„μ©
2. **μ „μ΄μ‹**: `dp[i] = min(dp[i-k] ~ dp[i-1]) + cost[i]`
3. **λ¨λ…Έν† λ‹‰ ν**λ΅ μλ„μ° μµμ†κ°’μ„ `O(1)`μ— μ°ΎκΈ°

### μ½”λ“

```javascript
function getMinimumCost(cost, k) {
  const n = cost.length;
  const dp = new Array(n).fill(0);
  const dq = [];

  dp[0] = 0;
  dq.push(0);

  for (let i = 1; i < n; i++) {
    // μλ„μ° λ²”μ„ λ°– μ κ±°
    while (dq.length && dq[0] < i - k) dq.shift();

    // μλ„μ° λ‚΄ μµμ†κ°’μΌλ΅ DP κ³„μ‚°
    const best = dq.length ? dp[dq[0]] : Infinity;
    dp[i] = best + cost[i];

    // λ¨λ…Έν† λ‹‰ ν μ μ§€ (μµμ†κ°’λ§)
    while (dq.length && dp[i] <= dp[dq[dq.length - 1]]) dq.pop();
    dq.push(i);
  }
  return dp[n - 1];
}
```

### μ£Όμ” ν¬μΈνΈ
- κ° μ„μΉμ—μ„ μ΄μ „ `k`κ° μ„μΉ μ¤‘ μµμ† λΉ„μ© μ„ νƒ
- λ¨λ…Έν† λ‹‰ νλ΅ μµμ ν™” β†’ `O(nk)` β†’ `O(n)`

---

## 3. μΌκ΄€λ λ΅κ·Έ μµλ€ κΈΈμ΄

### λ¬Έμ  μ„¤λ…
- **λ¬Έμ **: λ°°μ—΄ `userEvent`μ—μ„ λ¶€λ¶„λ°°μ—΄μ μµλΉλ„ = μ „μ²΄ λ°°μ—΄ μµμ† λΉλ„κ°€ λλ” μµλ€ κΈΈμ΄λ¥Ό μ°Ύλ”λ‹¤.
- **ν•µμ‹¬ κ°λ…**: μ¬λΌμ΄λ”© μλ„μ°, λΉλ„ ν•΄μ‹λ§µ, λΉλ„μ λΉλ„
- **μ‹κ°„/κ³µκ°„ λ³µμ΅λ„**: `O(n)` / `O(U)` (U: κ³ μ  μ‚¬μ©μ μ)

### ν’€μ΄ ν•µμ‹¬
1. **μ „μ²΄ λ°°μ—΄μ μµμ† λΉλ„** κ³„μ‚°
2. **μ¬λΌμ΄λ”© μλ„μ°**λ΅ λ¶€λ¶„λ°°μ—΄ νƒμƒ‰
3. **λΉλ„μ λΉλ„ λ§µ**μΌλ΅ ν„μ¬ μλ„μ°μ μµλΉλ„ μ¶”μ 
4. μλ„μ° μµλΉλ„ > μ „μ²΄ μµμ†λΉλ„λ©΄ μλ„μ° μ¶•μ†

### μ½”λ“

```javascript
function longestConsistentLog(userEvent) {
  const n = userEvent.length;

  // μ „μ²΄ λ°°μ—΄μ μµμ† λΉλ„ κ³„μ‚°
  const totalFreq = new Map();
  for (const u of userEvent) totalFreq.set(u, (totalFreq.get(u) || 0) + 1);
  let globalMinFreq = Infinity;
  for (const v of totalFreq.values()) globalMinFreq = Math.min(globalMinFreq, v);

  // μ¬λΌμ΄λ”© μλ„μ° μ΄κΈ°ν™”
  const win = new Map(); // μλ„μ° λ‚΄ κ° μ μ €μ λΉλ„
  const freqCount = new Map(); // λΉλ„μ λΉλ„
  
  const inc = (f) => freqCount.set(f, (freqCount.get(f) || 0) + 1);
  const dec = (f) => {
    const c = (freqCount.get(f) || 0) - 1;
    if (c <= 0) freqCount.delete(f);
    else freqCount.set(f, c);
  };

  let l = 0, ans = 0, maxFreq = 0;

  for (let r = 0; r < n; r++) {
    const x = userEvent[r];
    const old = win.get(x) || 0;
    if (old) dec(old);
    const now = old + 1;
    win.set(x, now);
    inc(now);
    maxFreq = Math.max(maxFreq, now);

    // μλ„μ° μµλΉλ„κ°€ μ „μ²΄ μµμ†λΉλ„λ³΄λ‹¤ ν¬λ©΄ μ¶•μ†
    while (maxFreq > globalMinFreq) {
      const y = userEvent[l++];
      const prev = win.get(y);
      dec(prev);
      const nxt = prev - 1;
      if (!nxt) win.delete(y);
      else { win.set(y, nxt); inc(nxt); }
      while (maxFreq && !freqCount.get(maxFreq)) maxFreq--;
    }

    // μ΅°κ±΄ λ§μ΅± μ‹ μµλ€ κΈΈμ΄ κ°±μ‹ 
    if (maxFreq === globalMinFreq) ans = Math.max(ans, r - l + 1);
  }

  return ans;
}
```

### μ£Όμ” ν¬μΈνΈ
- **λΉλ„μ λΉλ„** κ΄€λ¦¬κ°€ ν•µμ‹¬ (freqCount)
- `freqCount.get(f)` = ν„μ¬ μλ„μ°μ—μ„ λΉλ„κ°€ `f`μΈ μ›μ†μ κ°μ
- μ΄λ¥Ό ν†µν•΄ μλ„μ° λ‚΄ μµλΉλ„λ¥Ό ν¨μ¨μ μΌλ΅ μ¶”μ 

---

## π’΅ κ³µν†µ ν¨ν„΄ λ¶„μ„

### 1. λ¨λ…Έν† λ‹‰ ν/λ±μ ν™μ©
- λ¬Έμ  1, 2μ—μ„ μ¬λΌμ΄λ”© μλ„μ° λ‚΄ μµμ†/μµλ€κ°’μ„ `O(1)`μ— μ°ΎκΈ° μ„ν•΄ μ‚¬μ©
- λ± μ μ§€ μ΅°κ±΄: μ¤λ¦„μ°¨μ(μµμ†) λλ” λ‚΄λ¦Όμ°¨μ(μµλ€)

### 2. μ¬λΌμ΄λ”© μλ„μ° μµμ ν™”
- λ¨λ“  λ¬Έμ μ—μ„ ν¬ ν¬μΈν„° λλ” μλ„μ° κΈ°λ²• μ‚¬μ©
- `O(nΒ²)` β†’ `O(n)` μµμ ν™”

### 3. λ³µμ΅ν• μƒνƒ κ΄€λ¦¬
- λ¬Έμ  3: λΉλ„μ λΉλ„ κ΄€λ¦¬
- μ¶”κ°€ μλ£κµ¬μ΅°λ΅ μƒνƒλ¥Ό ν¨μ¨μ μΌλ΅ μ¶”μ 

### 4. μ‚¬μ „ κ³„μ‚° ν™μ©
- λ¬Έμ  1: λ„μ  ν•© λ°°μ—΄
- λ¬Έμ  3: μ „μ²΄ λ°°μ—΄μ μµμ† λΉλ„

---

## π“ κ΄€λ ¨ κ°λ…

- **λ¨λ…Έν† λ‹‰ ν/λ±**: [data-structures/README.md](../data-structures/README.md)
- **μ¬λΌμ΄λ”© μλ„μ°**: [algorithms/README.md](../algorithms/README.md)
- **λ™μ  ν”„λ΅κ·Έλλ°**: [algorithms/README.md](../algorithms/README.md)

---

## π― ν•™μµ ν¬μΈνΈ

1. β… λ¨λ…Έν† λ‹‰ νλ¥Ό ν™μ©ν• μ¬λΌμ΄λ”© μλ„μ° μµμ ν™”
2. β… λ³µμ΅ν• μƒνƒ κ΄€λ¦¬ (λΉλ„μ λΉλ„)
3. β… λ„μ  ν•©μ„ ν™μ©ν• κµ¬κ°„ μΏΌλ¦¬ μµμ ν™”
4. β… DP + μ¬λΌμ΄λ”© μλ„μ° μ΅°ν•©

---

**Last Updated**: 2025-11-12

